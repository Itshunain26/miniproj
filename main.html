<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jarurat Care - Patient Records Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Custom styles that extend Tailwind */
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideIn {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .slide-in {
            animation: slideIn 0.3s ease-out;
        }
        
        .modal {
            visibility: hidden;
            opacity: 0;
            transition: visibility 0s, opacity 0.3s ease;
        }
        
        .modal.active {
            visibility: visible;
            opacity: 1;
        }
        
        .modal-content {
            transform: scale(0.95);
            transition: transform 0.3s ease;
        }
        
        .modal.active .modal-content {
            transform: scale(1);
        }
        
        .spinner {
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .patient-card {
            transition: all 0.2s ease;
        }
        
        .patient-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        /* Mobile menu animations */
        .mobile-menu {
            transform: translateX(-100%);
            transition: transform 0.3s ease-in-out;
        }
        
        .mobile-menu.open {
            transform: translateX(0);
        }

        /* Page transitions */
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
            animation: fadeIn 0.3s ease-out;
        }

        /* Form elements styling */
        input:focus, select:focus, textarea:focus {
            outline: 2px solid #3b82f6;
            outline-offset: 2px;
        }

        .input-error {
            border-color: #ef4444 !important;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <header class="bg-white shadow-md">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center">
                <i class="fas fa-heartbeat text-blue-600 text-2xl mr-3"></i>
                <h1 class="text-xl md:text-2xl font-bold text-blue-600">Jarurat Care</h1>
            </div>
            
            <!-- Desktop Navigation -->
            <nav class="hidden md:flex space-x-8">
                <a href="#home" class="nav-link text-gray-600 hover:text-blue-600 transition-colors">Home</a>
                <a href="#patients" class="nav-link text-gray-600 hover:text-blue-600 transition-colors">Patients</a>
                <a href="#about" class="nav-link text-gray-600 hover:text-blue-600 transition-colors">About</a>
            </nav>
            
            <!-- Mobile menu button -->
            <button id="mobile-menu-button" class="md:hidden text-gray-600 focus:outline-none">
                <i class="fas fa-bars text-xl"></i>
            </button>
        </div>
        
        <!-- Mobile Navigation Menu -->
        <div id="mobile-menu" class="mobile-menu fixed top-0 left-0 h-full w-64 bg-white shadow-lg z-50">
            <div class="p-4 border-b flex justify-between items-center">
                <div class="flex items-center">
                    <i class="fas fa-heartbeat text-blue-600 text-xl mr-2"></i>
                    <span class="font-bold text-blue-600">Jarurat Care</span>
                </div>
                <button id="close-mobile-menu" class="text-gray-600 focus:outline-none">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <div class="p-4 flex flex-col space-y-4">
                <a href="#home" class="mobile-nav-link block py-2 px-4 rounded hover:bg-blue-50 text-gray-700">
                    <i class="fas fa-home mr-2"></i> Home
                </a>
                <a href="#patients" class="mobile-nav-link block py-2 px-4 rounded hover:bg-blue-50 text-gray-700">
                    <i class="fas fa-user-injured mr-2"></i> Patients
                </a>
                <a href="#about" class="mobile-nav-link block py-2 px-4 rounded hover:bg-blue-50 text-gray-700">
                    <i class="fas fa-info-circle mr-2"></i> About
                </a>
            </div>
        </div>
        <div id="mobile-menu-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden"></div>
    </header>

    <main class="container mx-auto px-4 py-8">
        <!-- Home Page -->
        <section id="home" class="page active">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-4">Welcome to Jarurat Care</h2>
                <p class="text-lg text-gray-600 max-w-2xl mx-auto">Streamline your patient management with our simple and effective dashboard</p>
            </div>
            
            <div class="bg-white rounded-xl shadow-md p-6 mb-8 max-w-4xl mx-auto">
                <div class="flex flex-col md:flex-row items-center">
                    <div class="md:w-1/2 mb-6 md:mb-0 md:pr-8">
                        <img src="https://images.unsplash.com/photo-1576091160550-2173dba999ef?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" 
                             alt="Healthcare professionals" 
                             class="rounded-lg w-full h-auto shadow-md">
                    </div>
                    <div class="md:w-1/2">
                        <h3 class="text-2xl font-semibold text-gray-800 mb-3">Efficient Patient Management</h3>
                        <p class="text-gray-600 mb-4">Our dashboard helps you keep track of all your patients' information in one place. Easily search, view, and manage patient records with just a few clicks.</p>
                        <div class="flex space-x-3">
                            <a href="#patients" class="bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md transition-colors flex items-center">
                                <i class="fas fa-clipboard-list mr-2"></i> View Patients
                            </a>
                            <a href="#about" class="bg-gray-200 hover:bg-gray-300 text-gray-700 py-2 px-4 rounded-md transition-colors flex items-center">
                                <i class="fas fa-info-circle mr-2"></i> Learn More
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
                <div class="bg-white rounded-xl shadow-sm p-6 text-center border-t-4 border-blue-500">
                    <div class="bg-blue-100 w-16 h-16 mx-auto rounded-full flex items-center justify-center mb-4">
                        <i class="fas fa-search text-blue-600 text-2xl"></i>
                    </div>
                    <h3 class="font-semibold text-xl mb-2">Easy Search</h3>
                    <p class="text-gray-600">Quickly find patients with our powerful search feature</p>
                </div>
                
                <div class="bg-white rounded-xl shadow-sm p-6 text-center border-t-4 border-green-500">
                    <div class="bg-green-100 w-16 h-16 mx-auto rounded-full flex items-center justify-center mb-4">
                        <i class="fas fa-user-plus text-green-600 text-2xl"></i>
                    </div>
                    <h3 class="font-semibold text-xl mb-2">Add Patients</h3>
                    <p class="text-gray-600">Simply add new patients to your database</p>
                </div>
                
                <div class="bg-white rounded-xl shadow-sm p-6 text-center border-t-4 border-purple-500">
                    <div class="bg-purple-100 w-16 h-16 mx-auto rounded-full flex items-center justify-center mb-4">
                        <i class="fas fa-mobile-alt text-purple-600 text-2xl"></i>
                    </div>
                    <h3 class="font-semibold text-xl mb-2">Mobile Friendly</h3>
                    <p class="text-gray-600">Access your patient records on any device</p>
                </div>
            </div>
            
            <div class="text-center">
                <a href="#patients" class="inline-flex items-center bg-blue-600 hover:bg-blue-700 text-white py-3 px-6 rounded-md transition-colors shadow-md">
                    Go to Patient Dashboard 
                    <i class="fas fa-arrow-right ml-2"></i>
                </a>
            </div>
        </section>
        
        <!-- Patients Page -->
        <section id="patients" class="page">
            <div class="mb-6 flex flex-col md:flex-row md:items-center md:justify-between">
                <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-4 md:mb-0">
                    <i class="fas fa-users text-blue-600 mr-2"></i> Patient Records
                </h2>
                <div class="flex flex-col md:flex-row space-y-3 md:space-y-0 md:space-x-3">
                    <div class="relative">
                        <input type="text" id="search-input" placeholder="Search patients..." 
                               class="pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-300 w-full">
                        <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                    </div>
                    <button id="add-patient-btn" class="bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg flex items-center justify-center transition-colors">
                        <i class="fas fa-plus mr-2"></i> Add Patient
                    </button>
                </div>
            </div>
            
            <div id="loader" class="hidden flex flex-col items-center justify-center py-12">
                <div class="spinner w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full mb-4"></div>
                <p class="text-gray-600">Loading patient records...</p>
            </div>
            
            <div id="error-message" class="hidden bg-red-100 text-red-700 p-4 rounded-lg mb-6">
                <div class="flex items-center">
                    <i class="fas fa-exclamation-circle text-xl mr-3"></i>
                    <p>Unable to load patient records. Please try again later.</p>
                </div>
                <button id="retry-btn" class="mt-3 bg-red-600 text-white py-1 px-3 rounded-md hover:bg-red-700 transition-colors">
                    <i class="fas fa-sync-alt mr-1"></i> Retry
                </button>
            </div>
            
            <div id="no-results" class="hidden text-center py-12">
                <div class="bg-gray-100 rounded-full w-20 h-20 mx-auto flex items-center justify-center mb-4">
                    <i class="fas fa-search text-gray-400 text-3xl"></i>
                </div>
                <h3 class="text-xl font-semibold text-gray-700 mb-2">No patients found</h3>
                <p class="text-gray-600 mb-4">Try adjusting your search criteria</p>
                <button id="clear-search-btn" class="bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg transition-colors">
                    Clear Search
                </button>
            </div>
            
            <!-- Patient Cards Grid -->
            <div id="patients-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"></div>
        </section>
        
        <!-- About Page -->
        <section id="about" class="page">
            <div class="max-w-4xl mx-auto">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">About Jarurat Care</h2>
                
                <div class="bg-white rounded-xl shadow-md p-8 mb-8">
                    <h3 class="text-2xl font-semibold text-blue-600 mb-4">Our Mission</h3>
                    <p class="text-gray-700 mb-6 leading-relaxed">
                        At Jarurat Care, we believe in providing the highest standard of patient care through 
                        technological innovation. Our patient records dashboard is designed to simplify the 
                        management of patient information, allowing healthcare providers to focus on what 
                        matters most - patient care.
                    </p>
                    
                    <h3 class="text-2xl font-semibold text-blue-600 mb-4">Why Choose Our Dashboard</h3>
                    <ul class="space-y-3 text-gray-700 mb-6">
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-green-500 mt-1 mr-2"></i>
                            <span>Simple and intuitive interface designed for healthcare professionals</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-green-500 mt-1 mr-2"></i>
                            <span>Secure patient data management with privacy controls</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-green-500 mt-1 mr-2"></i>
                            <span>Responsive design that works on desktop and mobile devices</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-green-500 mt-1 mr-2"></i>
                            <span>Quick search functionality to find patient records instantly</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-green-500 mt-1 mr-2"></i>
                            <span>Easily add and update patient information</span>
                        </li>
                    </ul>
                    
                    <div class="bg-blue-50 p-6 rounded-lg">
                        <h4 class="font-semibold text-lg mb-3 text-blue-800">Contact Information</h4>
                        <p class="mb-4 text-blue-900">
                            Have questions or need support? Our team is here to help!
                        </p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="flex items-center">
                                <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-3">
                                    <i class="fas fa-envelope text-blue-600"></i>
                                </div>
                                <span class="text-gray-700">support@jaruratcare.com</span>
                            </div>
                            <div class="flex items-center">
                                <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-3">
                                    <i class="fas fa-phone text-blue-600"></i>
                                </div>
                                <span class="text-gray-700">+1 (555) 123-4567</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="text-center">
                    <a href="#patients" class="inline-flex items-center bg-blue-600 hover:bg-blue-700 text-white py-3 px-6 rounded-md transition-colors shadow-md">
                        <i class="fas fa-arrow-left mr-2"></i> Back to Patient Dashboard
                    </a>
                </div>
            </div>
        </section>
    </main>
    
    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 mt-12">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center mb-6">
                <div class="flex items-center mb-4 md:mb-0">
                    <i class="fas fa-heartbeat text-blue-400 text-2xl mr-3"></i>
                    <h2 class="text-xl font-bold">Jarurat Care</h2>
                </div>
                <div class="flex space-x-4">
                    <a href="#" class="text-blue-300 hover:text-white transition-colors">
                        <i class="fab fa-twitter text-xl"></i>
                    </a>
                    <a href="#" class="text-blue-300 hover:text-white transition-colors">
                        <i class="fab fa-facebook text-xl"></i>
                    </a>
                    <a href="#" class="text-blue-300 hover:text-white transition-colors">
                        <i class="fab fa-linkedin text-xl"></i>
                    </a>
                    <a href="#" class="text-blue-300 hover:text-white transition-colors">
                        <i class="fab fa-instagram text-xl"></i>
                    </a>
                </div>
            </div>
            <div class="border-t border-gray-700 pt-6 text-center md:text-left">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div>
                        <h3 class="text-lg font-semibold mb-3 text-blue-300">Quick Links</h3>
                        <ul class="space-y-2">
                            <li><a href="#home" class="text-gray-300 hover:text-white transition-colors">Home</a></li>
                            <li><a href="#patients" class="text-gray-300 hover:text-white transition-colors">Patients</a></li>
                            <li><a href="#about" class="text-gray-300 hover:text-white transition-colors">About</a></li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold mb-3 text-blue-300">Resources</h3>
                        <ul class="space-y-2">
                            <li><a href="#" class="text-gray-300 hover:text-white transition-colors">Documentation</a></li>
                            <li><a href="#" class="text-gray-300 hover:text-white transition-colors">FAQs</a></li>
                            <li><a href="#" class="text-gray-300 hover:text-white transition-colors">Support</a></li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold mb-3 text-blue-300">Legal</h3>
                        <ul class="space-y-2">
                            <li><a href="#" class="text-gray-300 hover:text-white transition-colors">Privacy Policy</a></li>
                            <li><a href="#" class="text-gray-300 hover:text-white transition-colors">Terms of Service</a></li>
                            <li><a href="#" class="text-gray-300 hover:text-white transition-colors">HIPAA Compliance</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="text-center mt-8 text-sm text-gray-400">
                <p>© 2023 Jarurat Care. All rights reserved.</p>
            </div>
        </div>
    </footer>
    
    <!-- Patient Details Modal -->
    <div id="patient-modal" class="modal fixed inset-0 flex items-center justify-center z-50 p-4">
        <div class="bg-black bg-opacity-50 absolute inset-0" id="modal-overlay"></div>
        <div class="modal-content bg-white rounded-xl shadow-xl p-6 max-w-lg w-full relative z-10 max-h-[90vh] overflow-y-auto">
            <div id="patient-detail-content">
                <!-- Patient details will be injected here -->
            </div>
            <button id="close-modal" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700 focus:outline-none">
                <i class="fas fa-times text-xl"></i>
            </button>
        </div>
    </div>
    
    <!-- Add Patient Modal -->
    <div id="add-patient-modal" class="modal fixed inset-0 flex items-center justify-center z-50 p-4">
        <div class="bg-black bg-opacity-50 absolute inset-0" id="add-modal-overlay"></div>
        <div class="modal-content bg-white rounded-xl shadow-xl p-6 max-w-xl w-full relative z-10">
            <h3 class="text-2xl font-bold text-gray-800 mb-6">Add New Patient</h3>
            
            <form id="add-patient-form" class="space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="patient-name" class="block text-gray-700 font-medium mb-1">Full Name <span class="text-red-500">*</span></label>
                        <input type="text" id="patient-name" name="name" required 
                               class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none">
                        <p class="error-message text-red-500 text-sm mt-1 hidden">Name is required</p>
                    </div>
                    
                    <div>
                        <label for="patient-age" class="block text-gray-700 font-medium mb-1">Age <span class="text-red-500">*</span></label>
                        <input type="number" id="patient-age" name="age" min="0" max="120" required
                               class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none">
                        <p class="error-message text-red-500 text-sm mt-1 hidden">Valid age is required</p>
                    </div>
                </div>
                
                <div>
                    <label for="patient-contact" class="block text-gray-700 font-medium mb-1">Contact Number <span class="text-red-500">*</span></label>
                    <input type="tel" id="patient-contact" name="contact" required
                           class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none">
                    <p class="error-message text-red-500 text-sm mt-1 hidden">Valid contact number is required</p>
                </div>
                
                <div>
                    <label for="patient-email" class="block text-gray-700 font-medium mb-1">Email</label>
                    <input type="email" id="patient-email" name="email"
                           class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none">
                    <p class="error-message text-red-500 text-sm mt-1 hidden">Invalid email format</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="patient-gender" class="block text-gray-700 font-medium mb-1">Gender</label>
                        <select id="patient-gender" name="gender" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none">
                            <option value="">Select Gender</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                            <option value="Prefer not to say">Prefer not to say</option>
                        </select>
                    </div>
                    
                    <div>
                        <label for="patient-bloodType" class="block text-gray-700 font-medium mb-1">Blood Type</label>
                        <select id="patient-bloodType" name="bloodType" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none">
                            <option value="">Select Blood Type</option>
                            <option value="A+">A+</option>
                            <option value="A-">A-</option>
                            <option value="B+">B+</option>
                            <option value="B-">B-</option>
                            <option value="AB+">AB+</option>
                            <option value="AB-">AB-</option>
                            <option value="O+">O+</option>
                            <option value="O-">O-</option>
                        </select>
                    </div>
                </div>
                
                <div>
                    <label for="patient-details" class="block text-gray-700 font-medium mb-1">Medical History</label>
                    <textarea id="patient-details" name="details" rows="3" 
                              class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none"
                              placeholder="Brief medical history or notes"></textarea>
                </div>
                
                <div class="border-t border-gray-200 pt-4 flex justify-end space-x-3">
                    <button type="button" id="cancel-add-patient" class="bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 px-4 rounded-lg transition-colors">
                        Cancel
                    </button>
                    <button type="submit" id="save-patient" class="bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg transition-colors flex items-center">
                        <i class="fas fa-save mr-2"></i> Save Patient
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Mock patient data
        const mockPatients = [
            {
                id: 1,
                name: "Alice Johnson",
                age: 42,
                contact: "+1 (555) 123-4567",
                email: "alice.j@example.com",
                gender: "Female",
                bloodType: "A+",
                details: "History of hypertension. Regular checkups every 3 months. Currently on lisinopril 10mg daily."
            },
            {
                id: 2,
                name: "Bob Smith",
                age: 65,
                contact: "+1 (555) 234-5678",
                email: "bob.smith@example.com",
                gender: "Male",
                bloodType: "O-",
                details: "Type 2 diabetes diagnosed in 2015. Takes metformin 1000mg twice daily. Last HbA1c: 6.8%."
            },
            {
                id: 3,
                name: "Carol Martinez",
                age: 29,
                contact: "+1 (555) 345-6789",
                email: "carol.m@example.com",
                gender: "Female",
                bloodType: "B+",
                details: "Asthma since childhood. Uses albuterol inhaler as needed. Allergic to peanuts and penicillin."
            },
            {
                id: 4,
                name: "David Wilson",
                age: 51,
                contact: "+1 (555) 456-7890",
                email: "david.w@example.com",
                gender: "Male",
                bloodType: "AB+",
                details: "Underwent bypass surgery in 2019. On statins and aspirin daily. Scheduled for follow-up next month."
            },
            {
                id: 5,
                name: "Elena Petrova",
                age: 36,
                contact: "+1 (555) 567-8901",
                email: "elena.p@example.com",
                gender: "Female",
                bloodType: "A-",
                details: "Migraine sufferer. Takes sumatriptan as needed. Triggers include stress and lack of sleep."
            },
            {
                id: 6,
                name: "Frank Thomas",
                age: 78,
                contact: "+1 (555) 678-9012",
                email: "frank.t@example.com",
                gender: "Male",
                bloodType: "O+",
                details: "Arthritis in both knees. Recently started physical therapy. Currently using acetaminophen for pain management."
            },
            {
                id: 7,
                name: "Grace Kim",
                age: 32,
                contact: "+1 (555) 789-0123",
                email: "grace.k@example.com",
                gender: "Female",
                bloodType: "B-",
                details: "Pregnancy - second trimester. Due date: March 15. Previous C-section with first child."
            },
            {
                id: 8,
                name: "Henry Okonkwo",
                age: 44,
                contact: "+1 (555) 890-1234",
                email: "henry.o@example.com",
                gender: "Male",
                bloodType: "AB-",
                details: "GERD diagnosed 2020. On pantoprazole 40mg daily. Advised to avoid spicy foods and alcohol."
            }
        ];

        // State management
        let patients = [...mockPatients];
        let filteredPatients = [...patients];
        let searchQuery = "";
        let selectedPatient = null;
        let nextId = patients.length + 1;

        // DOM elements
        const patientsGrid = document.getElementById("patients-grid");
        const searchInput = document.getElementById("search-input");
        const patientModal = document.getElementById("patient-modal");
        const modalOverlay = document.getElementById("modal-overlay");
        const closeModalBtn = document.getElementById("close-modal");
        const addPatientBtn = document.getElementById("add-patient-btn");
        const addPatientModal = document.getElementById("add-patient-modal");
        const addModalOverlay = document.getElementById("add-modal-overlay");
        const cancelAddPatientBtn = document.getElementById("cancel-add-patient");
        const addPatientForm = document.getElementById("add-patient-form");
        const noResultsElem = document.getElementById("no-results");
        const clearSearchBtn = document.getElementById("clear-search-btn");
        const loaderElem = document.getElementById("loader");
        const errorMessageElem = document.getElementById("error-message");
        const retryBtn = document.getElementById("retry-btn");
        const patientDetailContent = document.getElementById("patient-detail-content");
        
        // Mobile menu elements
        const mobileMenuBtn = document.getElementById("mobile-menu-button");
        const mobileMenu = document.getElementById("mobile-menu");
        const closeMobileMenuBtn = document.getElementById("close-mobile-menu");
        const mobileMenuOverlay = document.getElementById("mobile-menu-overlay");
        const mobileNavLinks = document.querySelectorAll(".mobile-nav-link");

        // Navigation
        const navLinks = document.querySelectorAll(".nav-link, .mobile-nav-link");
        const pages = document.querySelectorAll(".page");

        // Initialize the app
        function init() {
            // Show loading state first
            showLoader();
            
            // Simulate API call delay
            setTimeout(() => {
                // Randomly decide if we should show an error (10% chance)
                if (Math.random() < 0.1) {
                    showError();
                } else {
                    hideLoader();
                    renderPatients();
                }
            }, 1000);
            
            // Set up event listeners
            setupEventListeners();
        }

        // Show loader
        function showLoader() {
            loaderElem.classList.remove("hidden");
            patientsGrid.innerHTML = "";
            errorMessageElem.classList.add("hidden");
        }

        // Hide loader
        function hideLoader() {
            loaderElem.classList.add("hidden");
        }

        // Show error message
        function showError() {
            hideLoader();
            errorMessageElem.classList.remove("hidden");
        }

        // Setup all event listeners
        function setupEventListeners() {
            // Search input
            searchInput.addEventListener("input", handleSearch);
            
            // Clear search button
            clearSearchBtn.addEventListener("click", clearSearch);
            
            // Retry button
            retryBtn.addEventListener("click", retryLoading);
            
            // Modal close button
            closeModalBtn.addEventListener("click", closeModal);
            modalOverlay.addEventListener("click", closeModal);
            
            // Add patient buttons
            addPatientBtn.addEventListener("click", openAddPatientModal);
            cancelAddPatientBtn.addEventListener("click", closeAddPatientModal);
            addModalOverlay.addEventListener("click", closeAddPatientModal);
            
            // Add patient form
            addPatientForm.addEventListener("submit", handleAddPatient);
            
            // Navigation
            navLinks.forEach(link => {
                link.addEventListener("click", handleNavigation);
            });
            
            // Mobile menu
            mobileMenuBtn.addEventListener("click", openMobileMenu);
            closeMobileMenuBtn.addEventListener("click", closeMobileMenu);
            mobileMenuOverlay.addEventListener("click", closeMobileMenu);
            mobileNavLinks.forEach(link => {
                link.addEventListener("click", closeMobileMenu);
            });
        }

        // Handle search functionality
        function handleSearch(e) {
            searchQuery = e.target.value.trim().toLowerCase();
            filterPatients();
            renderPatients();
        }

        // Filter patients based on search query
        function filterPatients() {
            if (!searchQuery) {
                filteredPatients = [...patients];
            } else {
                filteredPatients = patients.filter(patient => 
                    patient.name.toLowerCase().includes(searchQuery) ||
                    patient.contact.includes(searchQuery) ||
                    (patient.email && patient.email.toLowerCase().includes(searchQuery))
                );
            }
            
            // Show/hide no results message
            if (filteredPatients.length === 0 && searchQuery) {
                noResultsElem.classList.remove("hidden");
            } else {
                noResultsElem.classList.add("hidden");
            }
        }

        // Clear search
        function clearSearch() {
            searchInput.value = "";
            searchQuery = "";
            filterPatients();
            renderPatients();
        }

        // Retry loading patients
        function retryLoading() {
            init();
        }

        // Render patients to the grid
        function renderPatients() {
            patientsGrid.innerHTML = "";
            
            filteredPatients.forEach((patient, index) => {
                const patientCard = document.createElement("div");
                patientCard.className = "patient-card bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden";
                patientCard.innerHTML = `
                    <div class="p-5">
                        <div class="flex items-start justify-between mb-3">
                            <h3 class="font-semibold text-lg text-gray-800">${patient.name}</h3>
                            <span class="bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full">ID: ${patient.id}</span>
                        </div>
                        <div class="space-y-2 mb-4">
                            <div class="flex items-center text-gray-600">
                                <i class="fas fa-birthday-cake w-5 text-blue-500"></i>
                                <span class="ml-2">${patient.age} years</span>
                            </div>
                            <div class="flex items-center text-gray-600">
                                <i class="fas fa-phone w-5 text-blue-500"></i>
                                <span class="ml-2">${patient.contact}</span>
                            </div>
                            ${patient.email ? 
                                `<div class="flex items-center text-gray-600">
                                    <i class="fas fa-envelope w-5 text-blue-500"></i>
                                    <span class="ml-2">${patient.email}</span>
                                </div>` : ''}
                        </div>
                        <button class="view-details-btn w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg transition-colors" 
                                data-id="${patient.id}">
                            <i class="fas fa-eye mr-2"></i> View Details
                        </button>
                    </div>
                `;
                
                // Add animation delay to create staggered effect
                patientCard.style.animationDelay = `${index * 0.05}s`;
                patientCard.classList.add("slide-in");
                
                // Add to the grid
                patientsGrid.appendChild(patientCard);
                
                // Add event listener to the view details button
                const viewDetailsBtn = patientCard.querySelector(".view-details-btn");
                viewDetailsBtn.addEventListener("click", () => openPatientDetails(patient.id));
            });
        }

        // Open patient details modal
        function openPatientDetails(patientId) {
            selectedPatient = patients.find(p => p.id === patientId);
            
            if (selectedPatient) {
                // Populate modal with patient details
                patientDetailContent.innerHTML = `
                    <div class="text-center mb-6">
                        <div class="inline-flex items-center justify-center w-20 h-20 bg-blue-100 rounded-full mb-3">
                            <i class="fas fa-user-circle text-blue-600 text-4xl"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-800">${selectedPatient.name}</h3>
                        <p class="text-gray-500">Patient ID: ${selectedPatient.id}</p>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <div class="bg-gray-50 rounded-lg p-4">
                            <h4 class="font-semibold text-gray-700 mb-2">Personal Information</h4>
                            <ul class="space-y-2">
                                <li class="flex items-center">
                                    <span class="text-gray-600 w-24">Age:</span>
                                    <span class="font-medium">${selectedPatient.age} years</span>
                                </li>
                                <li class="flex items-center">
                                    <span class="text-gray-600 w-24">Gender:</span>
                                    <span class="font-medium">${selectedPatient.gender || 'Not specified'}</span>
                                </li>
                                <li class="flex items-center">
                                    <span class="text-gray-600 w-24">Blood Type:</span>
                                    <span class="font-medium">${selectedPatient.bloodType || 'Not specified'}</span>
                                </li>
                            </ul>
                        </div>
                        
                        <div class="bg-gray-50 rounded-lg p-4">
                            <h4 class="font-semibold text-gray-700 mb-2">Contact Information</h4>
                            <ul class="space-y-2">
                                <li class="flex items-center">
                                    <span class="text-gray-600 w-24">Phone:</span>
                                    <span class="font-medium">${selectedPatient.contact}</span>
                                </li>
                                <li class="flex items-center">
                                    <span class="text-gray-600 w-24">Email:</span>
                                    <span class="font-medium">${selectedPatient.email || 'Not provided'}</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <h4 class="font-semibold text-gray-700 mb-2">Medical History</h4>
                        <p class="text-gray-600 bg-gray-50 p-4 rounded-lg">
                            ${selectedPatient.details || 'No medical history provided.'}
                        </p>
                    </div>
                    
                    <div class="flex justify-end">
                        <button class="bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg transition-colors" 
                                onclick="closeModal()">
                            Close
                        </button>
                    </div>
                `;
                
                // Open the modal
                patientModal.classList.add("active");
                document.body.style.overflow = "hidden"; // Prevent scrolling
            }
        }

        // Close patient details modal
        function closeModal() {
            patientModal.classList.remove("active");
            document.body.style.overflow = ""; // Re-enable scrolling
            selectedPatient = null;
        }

        // Open add patient modal
        function openAddPatientModal() {
            addPatientForm.reset();
            
            // Clear any previous error messages
            const errorMessages = addPatientForm.querySelectorAll(".error-message");
            errorMessages.forEach(msg => msg.classList.add("hidden"));
            
            // Clear any error styling on inputs
            const inputs = addPatientForm.querySelectorAll("input, select, textarea");
            inputs.forEach(input => input.classList.remove("input-error"));
            
            // Open the modal
            addPatientModal.classList.add("active");
            document.body.style.overflow = "hidden"; // Prevent scrolling
            
            // Focus the first input
            document.getElementById("patient-name").focus();
        }

        // Close add patient modal
        function closeAddPatientModal() {
            addPatientModal.classList.remove("active");
            document.body.style.overflow = ""; // Re-enable scrolling
        }

        // Handle adding a new patient
        function handleAddPatient(e) {
            e.preventDefault();
            
            // Validate form
            if (!validatePatientForm()) {
                return;
            }
            
            // Get form data
            const form = e.target;
            const formData = new FormData(form);
            
            // Create new patient object
            const newPatient = {
                id: nextId++,
                name: formData.get("name"),
                age: parseInt(formData.get("age")),
                contact: formData.get("contact"),
                email: formData.get("email") || null,
                gender: formData.get("gender") || null,
                bloodType: formData.get("bloodType") || null,
                details: formData.get("details") || null
            };
            
            // Show spinner on save button
            const saveButton = document.getElementById("save-patient");
            const originalButtonText = saveButton.innerHTML;
            saveButton.innerHTML = `<i class="spinner fas fa-spinner mr-2"></i> Saving...`;
            saveButton.disabled = true;
            
            // Simulate API call delay
            setTimeout(() => {
                // Add new patient to the array
                patients.unshift(newPatient);
                filterPatients();
                renderPatients();
                
                // Close modal
                closeAddPatientModal();
                
                // Reset button
                saveButton.innerHTML = originalButtonText;
                saveButton.disabled = false;
                
                // Show success toast
                showToast(`Patient ${newPatient.name} added successfully!`, "success");
            }, 1000);
        }

        // Validate patient form
        function validatePatientForm() {
            const form = document.getElementById("add-patient-form");
            let isValid = true;
            
            // Reset all error messages
            const errorMessages = form.querySelectorAll(".error-message");
            errorMessages.forEach(msg => msg.classList.add("hidden"));
            
            // Reset error styling on inputs
            const inputs = form.querySelectorAll("input, select, textarea");
            inputs.forEach(input => input.classList.remove("input-error"));
            
            // Validate name
            const nameInput = document.getElementById("patient-name");
            if (!nameInput.value.trim()) {
                showInputError(nameInput, "Name is required");
                isValid = false;
            }
            
            // Validate age
            const ageInput = document.getElementById("patient-age");
            if (!ageInput.value || parseInt(ageInput.value) < 0 || parseInt(ageInput.value) > 120) {
                showInputError(ageInput, "Valid age is required (0-120)");
                isValid = false;
            }
            
            // Validate contact
            const contactInput = document.getElementById("patient-contact");
            if (!contactInput.value.trim()) {
                showInputError(contactInput, "Contact number is required");
                isValid = false;
            }
            
            // Validate email if provided
            const emailInput = document.getElementById("patient-email");
            if (emailInput.value.trim() && !isValidEmail(emailInput.value)) {
                showInputError(emailInput, "Invalid email format");
                isValid = false;
            }
            
            return isValid;
        }

        // Show input error
        function showInputError(inputElement, message) {
            inputElement.classList.add("input-error");
            const errorMessage = inputElement.parentElement.querySelector(".error-message");
            errorMessage.textContent = message;
            errorMessage.classList.remove("hidden");
        }

        // Validate email
        function isValidEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        // Handle navigation
        function handleNavigation(e) {
            e.preventDefault();
            const targetPage = e.currentTarget.getAttribute("href").substring(1);
            
            // Hide all pages
            pages.forEach(page => {
                page.classList.remove("active");
            });
            
            // Show target page
            document.getElementById(targetPage).classList.add("active");
            
            // Update URL hash
            window.location.hash = targetPage;
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        // Open mobile menu
        function openMobileMenu() {
            mobileMenu.classList.add("open");
            mobileMenuOverlay.classList.remove("hidden");
            document.body.style.overflow = "hidden"; // Prevent scrolling
        }

        // Close mobile menu
        function closeMobileMenu() {
            mobileMenu.classList.remove("open");
            mobileMenuOverlay.classList.add("hidden");
            document.body.style.overflow = ""; // Re-enable scrolling
        }

        // Show toast notification
        function showToast(message, type = "info") {
            // Create toast element
            const toast = document.createElement("div");
            toast.className = `fixed bottom-4 right-4 p-4 rounded-lg shadow-lg z-50 flex items-center ${
                type === "success" ? "bg-green-600" : 
                type === "error" ? "bg-red-600" : 
                "bg-blue-600"
            } text-white max-w-xs`;
            
            // Add icon based on type
            let icon = "";
            if (type === "success") {
                icon = `<i class="fas fa-check-circle mr-3 text-xl"></i>`;
            } else if (type === "error") {
                icon = `<i class="fas fa-exclamation-circle mr-3 text-xl"></i>`;
            } else {
                icon = `<i class="fas fa-info-circle mr-3 text-xl"></i>`;
            }
            
            // Set toast content
            toast.innerHTML = `
                ${icon}
                <p>${message}</p>
                <button class="ml-auto text-white focus:outline-none" onclick="this.parentNode.remove()">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            // Add to document
            document.body.appendChild(toast);
            
            // Add fade-in animation
            toast.classList.add("fade-in");
            
            // Auto-remove after 5 seconds
            setTimeout(() => {
                toast.style.opacity = "0";
                setTimeout(() => {
                    toast.remove();
                }, 300);
            }, 5000);
        }

        // Handle navigation via URL hash
        function handleHashChange() {
            const hash = window.location.hash.substring(1) || "home";
            
            // Hide all pages
            pages.forEach(page => {
                page.classList.remove("active");
            });
            
            // Show target page
            const targetPage = document.getElementById(hash);
            if (targetPage) {
                targetPage.classList.add("active");
            } else {
                document.getElementById("home").classList.add("active");
            }
        }

        // Initialize the app when DOM is loaded
        document.addEventListener("DOMContentLoaded", function() {
            init();
            handleHashChange(); // Handle initial hash
        });

        // Listen for hash changes
        window.addEventListener("hashchange", handleHashChange);
    </script>
</body>
</html>
